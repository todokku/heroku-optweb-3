<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"> 

<h:head><title>Cadastro Unidade Negócio</title>

<f:metadata>	    
 <f:viewParam name = "id" value = "#{unidadeNegocioBean.id_unidade_negocio}"/>
</f:metadata>

</h:head> 

	<ui:composition template="/template/interna.xhtml">
	
			<ui:define name="titulo">Cadastro Unidade Negócio</ui:define>
		
				<ui:define name="corpo">
										
						<h:form id = "formMessages">
							<p:messages id = "messages"
							autoUpdate="true"
							closable = "true"
							/>
						</h:form>
						
						<h:form id = "cadastroUnidadeNeg">
						
								<div class = "ui-fluid">
									
									<p:panelGrid columns = "2"  styleClass="ui-panelgrid-blank">
										<p:outputLabel value="Código:" for="codUnidade"/>			
										<p:inputText value="#{unidadeNegocioBean.iniciar(usuarioBean.usuarioLogin).cod_unidade}"									
										id = "codUnidade"
										maxlength="11"
										disabled="#{unidadeNegocioBean.opcao()}"
										style = "width:auto"/>
										
										<p:outputLabel value="Descrição:" for="descricao"/>			
										<p:inputText value="#{unidadeNegocioBean.iniciar(usuarioBean.usuarioLogin).descricao}"									
										id = "descricao"
										maxlength="60"
										size = "60"
										style="width:auto"
			           		   			validatorMessage="O campo descrição deve ter no máximo 60 caracteres"/>
			           		   			
			           		   			<p:outputLabel value="Empresa:"/>											
										<p:selectOneMenu  style="width:200px" value="#{unidadeNegocioBean.iniciar(usuarioBean.usuarioLogin).cod_empresa.cod_empresa}" id="idEmpresa">								
											<f:selectItems value="#{empresaBean.listar(usuarioBean.usuarioLogin)}"  var="empresa" itemLabel="#{empresa.descricao}"  itemValue="#{empresa.cod_empresa}" />										
										</p:selectOneMenu>
							           	   																		
											<p:commandButton action="#{unidadeNegocioBean.salvar()}" value="Salvar">			
									
											<p:confirm header="Confirmation" message="Deseja realmente salvar?" icon="ui-icon-disk"/>
																	
								</p:commandButton>	
								
									<p:commandButton icon="ui-icon-arrowrefresh-1-w" action="#{usuarioBean.redirecionaMenu()}"  immediate="true"   style="width:30px;height:30px"/>			           		   				
								
								    	<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
											<p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
											<p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
								  		</p:confirmDialog>	
									
										<p:ajaxStatus onstart="PF('dlg').show()" onsuccess="PF('dlg').hide()"/>
										<p:dialog closable="false" draggable="false" header="Processando..." hideEffect="fade" modal="true" resizable="false" responsive="true" widgetVar="dlg">
											<p:graphicImage value = "/imagens/loadingBar-1.gif"/>										
										</p:dialog>
									</p:panelGrid>
							
								</div>
						       				
						</h:form>				
					
			</ui:define>
		
	</ui:composition>
	
</html>
